{% extends "base.html" %}
{% block content %}

<div class="container mt-5">

    <h2 class="mb-4">
        {% if form.instance.pk %}
            Editar Evento
        {% else %}
            Crear Nuevo Evento
        {% endif %}
    </h2>

    <div class="card shadow-sm">
        <div class="card-body">

            <form method="POST">
                {% csrf_token %}

                <!-- Errores generales -->
                {% if form.non_field_errors %}
                    <div class="alert alert-danger">
                        {{ form.non_field_errors }}
                    </div>
                {% endif %}

                <!-- Campo Título -->
                <div class="mb-3">
                    <label class="form-label">{{ form.titulo.label }}</label>
                    {{ form.titulo }}
                    {% for error in form.titulo.errors %}
                        <div class="text-danger small">{{ error }}</div>
                    {% endfor %}
                </div>

                <!-- Campo Descripción -->
                <div class="mb-3">
                    <label class="form-label">{{ form.descripcion.label }}</label>
                    {{ form.descripcion }}
                    {% for error in form.descripcion.errors %}
                        <div class="text-danger small">{{ error }}</div>
                    {% endfor %}
                </div>

                <!-- Campo Fecha -->
                <div class="mb-3">
                    <label class="form-label">{{ form.fecha.label }}</label>
                    {{ form.fecha }}
                    {% for error in form.fecha.errors %}
                        <div class="text-danger small">{{ error }}</div>
                    {% endfor %}
                </div>

                <!-- Campo Voluntarios -->
                <div class="mb-3">
                    <label class="form-label">{{ form.voluntarios.label }}</label>
                    <div class="border rounded p-3" style="max-height: 200px; overflow-y: auto;">
                        {{ form.voluntarios }}
                    </div>
                    {% for error in form.voluntarios.errors %}
                        <div class="text-danger small">{{ error }}</div>
                    {% endfor %}
                    <small class="text-muted">Selecciona los voluntarios que participarán en este evento.</small>
                </div>

                <!-- Botón Guardar -->
                <button type="submit" class="btn btn-success">
                    <i class="fa-solid fa-save me-2"></i>
                    {% if form.instance.pk %}
                        Guardar Cambios
                    {% else %}
                        Crear Evento
                    {% endif %}
                </button>

                <!-- Botón Volver -->
                <a href="{% url 'eventos:lista_eventos' %}" class="btn btn-secondary ms-2">
                    <i class="fa-solid fa-arrow-left me-2"></i>
                    Volver
                </a>

            </form>

        </div>
    </div>
</div>

{% endblock %}